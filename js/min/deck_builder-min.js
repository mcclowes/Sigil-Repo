$(function(){function a(a,r){var d=a.toLowerCase(),e=r.toLowerCase();return e>d?-1:d>e?1:0}function r(){this.cardName="",this.addCard=function(){function r(a){for(var r=0,d=0;d<c.length;d++)window.console.log(c[d]+", "+a.cardName),c[d]===a.cardName&&r++;return r}window.console.log(c),this.cardBody=jQuery("<div/>",{"class":"cardSelector"}),jQuery("<div/>",{"class":this.cardName,text:this.cardName}).appendTo(this.cardBody);var d=this;$(this.cardBody[0]).click(function(){d.cardBody.remove(),delete d});var e=r(this);window.console.log(e),0!=e?4>=e?(d.cardBody.remove(),delete d,$("."+this.cardName,c).addClass(e++)):window.alert("Card limit reached for this card"):(c.push(this.cardName),c.sort(a),$(".cardList:first").append(this.cardBody))}}function d(){this.cardName="",this.cardEffects=[],this.cardImage="",this.cardBody="",this.chooseCard=function(a){window.console.log($(this));var d=new r;d.cardName=a.cardName,d.addCard()},this.createCard=function(){this.cardBody=jQuery("<div/>",{"class":"card drawn spaced "+this.cardName.toLowerCase().split(" ").join("_")}),jQuery("<div/>",{"class":"cardName",text:this.cardName}).appendTo(this.cardBody),jQuery("<div/>",{"class":"cardEffects",text:this.cardEffects.join([separator=". "])+"."}).appendTo(this.cardBody);var a=this;$(this.cardBody[0]).click(function(){a.chooseCard(a)}),$(".cardPool:first").append(this.cardBody)}}function e(){for(var a=0;a<cards.length;a++){var r=new d;r.cardName=cards[a].name,r.cardEffects=cards[a].effects,window.console.log(a+", "+cards[a]+", "+cards[a].effects),r.createCard()}}function t(a){for(var d=0;a>d;d++){var e=new r;e.cardName=a[d],e.addCard()}}var c=[];window.console.log("Starting"),e(),$("#save").click(function(a){for(var r=[],d=0;d<c.length;d++)r.push(c[d]);window.console.log(r),this.href="data:plain/text,"+JSON.stringify(r)}),$("#load").change(function(a){var r=new FileReader;r.onload=function(){var a=r.result;window.console.log(dataUrl);var d=document.getElementById("output");d.src=a};var d=r.readAsText(this.files[0]);t(d)})});